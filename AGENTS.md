# Repository Guidelines

## Project Structure & Module Organization
- Firmware entry point lives in `User/source/main.c`, with Cortex-M3 startup and interrupt handlers in `startup/` and `User/source/stm32f10x_it.c`.
- Hardware abstraction (LEDs, keys, delays) is grouped under `BSP/`, while the STM32 Standard Peripheral Library sources and headers are mirrored in `Libraries/src` and `Libraries/inc`.
- Build artifacts generated by Keil µVision land in `Objects/` and `Listings/`; wipe these before committing to keep the repository clean.

## Build, Flash, and Debug
- Preferred workflow is Keil µVision: open `led.uvprojx`, select the required target, then run **Project → Build Target** followed by **Flash → Download**.
- Command-line build (CI or automation) can reuse Keil’s UV4 CLI: `UV4.exe -b led.uvprojx -t "LED" -o Objects/build.log`. Replace `"LED"` with the target name configured in µVision.
- When stepping through code, ensure the correct J-Link configuration from `JLinkSettings.ini` is loaded; adjust the SWD clock to match your board if you see connection faults.

## Coding Style & Naming Conventions
- Follow the STM32 SPL style: 4-space indentation, no tabs, braces on their own lines for functions, and `snake_case` for static helpers (`bsp_delay_init`).
- Keep hardware-facing functions in `BSP/` and expose them through headers in the same directory; user application code should include them via `User/include`.
- Run µVision’s built-in code formatter or `clang-format` with the Keil default profile before committing multi-file changes.

## Testing Guidelines
- Hardware validation relies on board-level smoke tests: verify LED blink timing and key debouncing with the dev board connected.
- For regressions, add lightweight assertions or status GPIO toggles in `User/source/main.c`; wrap them in `#ifdef DEBUG` guards so they compile out in release builds.
- Document manual test steps in the PR description, including measured timings or logic-analyzer captures when timing-sensitive code changes.

## Commit & Pull Request Guidelines
- Use descriptive, present-tense commits such as `Add BSP driver for user key` that explain what and why; group changes by feature or fix.
- Each PR should link to any relevant tracker item, describe the hardware setup used for validation, and attach screenshots or logic traces when behavior is visual.
- Request at least one peer review, tag reviewers familiar with the touched module (e.g., `BSP/`, `User/source`), and confirm that builds are green before merging.

## Hardware Setup Notes
- The project targets an STM32F10x board; confirm that clock and flash settings in `SystemInit()` match the actual MCU variant before flashing.
- Store board-specific secrets or configuration overrides outside the repo (e.g., user-level Keil settings) to keep the project portable.
